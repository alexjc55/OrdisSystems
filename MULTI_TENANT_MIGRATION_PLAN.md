# –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ eDAHouse –Ω–∞ Multi-Tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- eDAHouse - —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã —Å –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π (RU/EN/HE/AR)
- –û–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω = –æ–¥–Ω–∞ –∫–æ–ø–∏—è –∫–æ–¥–∞ + –æ–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –†–∞–∑–≤—ë—Ä–Ω—É—Ç–æ –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ: edahouse.ordis.co.il

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è 1000+ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- –ö–∞–∂–¥—ã–π –º–∞–≥–∞–∑–∏–Ω —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–ø–∏—é –∫–æ–¥–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ = –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 1000 –∫–æ–ø–∏–π (–Ω–µ—É–ø—Ä–∞–≤–ª—è–µ–º–æ)
- –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## –¶–µ–ª—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –≤ **SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º—É** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 1000+ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤:
- ‚úÖ –ö–∞–∂–¥—ã–π –º–∞–≥–∞–∑–∏–Ω –Ω–∞ —Å–≤–æ—ë–º –ø–æ–¥–¥–æ–º–µ–Ω–µ: `shop1.ordis.co.il`, `shop2.ordis.co.il`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ custom domains: `edahouse.com`, `myshop.com`
- ‚úÖ –ï–¥–∏–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –¥–ª—è –≤—Å–µ—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–æ–±–Ω–æ–≤–∏–ª–∏ –∫–æ–¥ –æ–¥–∏–Ω —Ä–∞–∑ ‚Üí –≤—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã)
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –º–∞–≥–∞–∑–∏–Ω–∞–º–∏
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (uploads) –º–µ–∂–¥—É –º–∞–≥–∞–∑–∏–Ω–∞–º–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: –û–¥–∏–Ω –∫–æ–¥ ‚Üí –ù–µ—Å–∫–æ–ª—å–∫–æ –ë–î

```
–û–¥–∏–Ω –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Node.js + Express)
  ‚îú‚îÄ‚îÄ master_db (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ tenants)
  ‚îú‚îÄ‚îÄ db_cluster_1 (–º–∞–≥–∞–∑–∏–Ω—ã 1-100)
  ‚îú‚îÄ‚îÄ db_cluster_2 (–º–∞–≥–∞–∑–∏–Ω—ã 101-200)
  ‚îî‚îÄ‚îÄ db_cluster_N (–º–∞–≥–∞–∑–∏–Ω—ã N01-N00)
```

**–ü–æ—á–µ–º—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ë–î, –∞ –Ω–µ –æ–¥–Ω–∞:**
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- ‚úÖ –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (–µ—Å–ª–∏ –æ–¥–Ω–∞ –ë–î –ø–∞–¥–∞–µ—Ç, –¥—Ä—É–≥–∏–µ —Ä–∞–±–æ—Ç–∞—é—Ç)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–≤–∑–ª–æ–º –æ–¥–Ω–æ–π –ë–î –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –≤—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã)

**–ü–æ—á–µ–º—É –Ω–µ –æ–¥–Ω–∞ –ë–î —Å tenant_id:**
- ‚ùå –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ–¥–Ω—É –ë–î –ø—Ä–∏ 1000 –º–∞–≥–∞–∑–∏–Ω–∞—Ö
- ‚ùå Single point of failure (—É–ø–∞–ª–∞ –ë–î = —É–ø–∞–ª–∏ –≤—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã)
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

### 2. Tenant Identification (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –ø–æ –¥–æ–º–µ–Ω—É)

#### Master Database Schema

```sql
-- Master –ë–î –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ tenants
CREATE TABLE tenants (
  id SERIAL PRIMARY KEY,
  subdomain VARCHAR(100) UNIQUE NOT NULL,       -- shop1, shop2, edahouse
  custom_domain VARCHAR(255) UNIQUE,           -- edahouse.com, myshop.com (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  db_cluster VARCHAR(50) NOT NULL,             -- cluster_1, cluster_2
  store_name VARCHAR(255),                     -- –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
  is_active BOOLEAN DEFAULT true,              -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –º–∞–≥–∞–∑–∏–Ω
  plan_type VARCHAR(50) DEFAULT 'basic',       -- basic, premium, enterprise
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:
-- id=1, subdomain="edahouse", custom_domain="edahouse.com", db_cluster="cluster_1", is_active=true
-- id=2, subdomain="shop2", custom_domain=NULL, db_cluster="cluster_1", is_active=true
-- id=3, subdomain="shop3", custom_domain="myshop.com", db_cluster="cluster_2", is_active=true

CREATE TABLE db_clusters (
  id SERIAL PRIMARY KEY,
  name VARCHAR(50) UNIQUE NOT NULL,            -- cluster_1, cluster_2
  connection_string TEXT NOT NULL,             -- DATABASE_URL –¥–ª—è —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
  max_tenants INTEGER DEFAULT 100,             -- –ú–∞–∫—Å–∏–º—É–º –º–∞–≥–∞–∑–∏–Ω–æ–≤ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä
  current_tenants INTEGER DEFAULT 0,           -- –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞–≥–∞–∑–∏–Ω–æ–≤
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### Tenant Detection Middleware

```typescript
// server/middleware/tenant.ts

import { Request, Response, NextFunction } from 'express';
import { Pool } from 'pg';

interface Tenant {
  id: number;
  subdomain: string;
  custom_domain: string | null;
  db_cluster: string;
  store_name: string;
  is_active: boolean;
}

// Master DB connection –¥–ª—è tenant lookup
const masterDb = new Pool({
  connectionString: process.env.MASTER_DB_URL
});

export async function tenantMiddleware(
  req: Request,
  res: Response,
  next: NextFunction
) {
  try {
    const hostname = req.hostname;
    let tenant: Tenant | null = null;
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º: –ø–æ–¥–¥–æ–º–µ–Ω –∏–ª–∏ custom domain
    if (hostname.endsWith('.ordis.co.il')) {
      // –ü–æ–¥–¥–æ–º–µ–Ω: shop1.ordis.co.il
      const subdomain = hostname.split('.')[0];
      const result = await masterDb.query(
        'SELECT * FROM tenants WHERE subdomain = $1 AND is_active = true',
        [subdomain]
      );
      tenant = result.rows[0];
    } else {
      // Custom domain: edahouse.com
      const result = await masterDb.query(
        'SELECT * FROM tenants WHERE custom_domain = $1 AND is_active = true',
        [hostname]
      );
      tenant = result.rows[0];
    }
    
    if (!tenant) {
      return res.status(404).json({ 
        error: 'Store not found',
        message: 'This store does not exist or has been deactivated'
      });
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º tenant –≤ request –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ –≤—Å–µ—Ö —Ä–æ—É—Ç–∞—Ö
    req.tenant = tenant;
    
    // –ü–æ–ª—É—á–∞–µ–º DB connection –¥–ª—è —ç—Ç–æ–≥–æ tenant
    req.db = getDbConnection(tenant.db_cluster);
    
    next();
  } catch (error) {
    console.error('Tenant middleware error:', error);
    res.status(500).json({ error: 'Internal server error' });
  }
}

// –†–∞—Å—à–∏—Ä—è–µ–º —Ç–∏–ø—ã Express
declare global {
  namespace Express {
    interface Request {
      tenant?: Tenant;
      db?: Pool;
    }
  }
}
```

### 3. Database Connection Manager

```typescript
// server/db-manager.ts

import { Pool } from 'pg';

// –ü—É–ª—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ë–î
const dbPools: Record<string, Pool> = {};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É–ª–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
export function initDbPools() {
  // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏–∑ env
  const clusters = [
    { name: 'cluster_1', url: process.env.DB_CLUSTER_1_URL },
    { name: 'cluster_2', url: process.env.DB_CLUSTER_2_URL },
    // ... –¥–æ–±–∞–≤–∏—Ç—å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  ];
  
  clusters.forEach(cluster => {
    if (cluster.url) {
      dbPools[cluster.name] = new Pool({
        connectionString: cluster.url,
        max: 20, // –ú–∞–∫—Å–∏–º—É–º 20 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä
        idleTimeoutMillis: 30000,
        connectionTimeoutMillis: 2000,
      });
      console.log(`‚úÖ DB Pool initialized for ${cluster.name}`);
    }
  });
}

// –ü–æ–ª—É—á–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
export function getDbConnection(clusterName: string): Pool {
  const pool = dbPools[clusterName];
  
  if (!pool) {
    throw new Error(`Database cluster "${clusterName}" not found`);
  }
  
  return pool;
}

// Graceful shutdown –≤—Å–µ—Ö –ø—É–ª–æ–≤
export async function closeAllPools() {
  const promises = Object.values(dbPools).map(pool => pool.end());
  await Promise.all(promises);
  console.log('All database pools closed');
}
```

### 4. –ò–∑–æ–ª—è—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (uploads)

```typescript
// server/upload-manager.ts

import multer from 'multer';
import path from 'path';
import fs from 'fs';

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:
// uploads/
//   ‚îú‚îÄ‚îÄ tenant_1/
//   ‚îÇ   ‚îú‚îÄ‚îÄ products/
//   ‚îÇ   ‚îú‚îÄ‚îÄ logos/
//   ‚îÇ   ‚îî‚îÄ‚îÄ banners/
//   ‚îú‚îÄ‚îÄ tenant_2/
//   ‚îî‚îÄ‚îÄ tenant_N/

export function getTenantUploadPath(tenantId: number, category: string): string {
  const basePath = path.join(process.cwd(), 'uploads', `tenant_${tenantId}`, category);
  
  // –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  if (!fs.existsSync(basePath)) {
    fs.mkdirSync(basePath, { recursive: true });
  }
  
  return basePath;
}

// Multer –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å tenant isolation
export function createTenantStorage(category: string) {
  return multer.diskStorage({
    destination: (req, file, cb) => {
      if (!req.tenant) {
        return cb(new Error('Tenant not found'), '');
      }
      const uploadPath = getTenantUploadPath(req.tenant.id, category);
      cb(null, uploadPath);
    },
    filename: (req, file, cb) => {
      const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
      cb(null, file.fieldname + '-' + uniqueSuffix + path.extname(file.originalname));
    }
  });
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É (—Ç–æ–ª—å–∫–æ —Å–≤–æ–π tenant)
export function checkFileAccess(tenantId: number, filePath: string): boolean {
  const allowedPath = path.join(process.cwd(), 'uploads', `tenant_${tenantId}`);
  const resolvedPath = path.resolve(filePath);
  return resolvedPath.startsWith(allowedPath);
}
```

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ—à–∞–≥–æ–≤—ã–π)

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ö–µ–º—ã –ë–î ‚≠ê –ù–ê–ß–ê–¢–¨ –° –≠–¢–û–ì–û

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å master –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è tenants

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `master_db`
2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã `tenants` –∏ `db_clusters` (—Å–º. SQL –≤—ã—à–µ)
3. –î–æ–±–∞–≤–∏—Ç—å Drizzle —Å—Ö–µ–º—É –¥–ª—è master –ë–î –≤ `shared/schema.ts`
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```env
   MASTER_DB_URL=postgresql://user:pass@host:5432/master_db
   DB_CLUSTER_1_URL=postgresql://user:pass@host:5432/cluster_1
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –í—Å—Ç–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å tenant
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å tenant –ø–æ subdomain

### –≠—Ç–∞–ø 2: Tenant Detection Middleware

**–¶–µ–ª—å:** –û–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–∞–≥–∞–∑–∏–Ω –ø–æ –¥–æ–º–µ–Ω—É –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω—É–∂–Ω—É—é –ë–î

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å `server/middleware/tenant.ts` (—Å–º. –∫–æ–¥ –≤—ã—à–µ)
2. –°–æ–∑–¥–∞—Ç—å `server/db-manager.ts` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–ª–∞–º–∏
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å middleware –≤ `server/index.ts`:
   ```typescript
   import { tenantMiddleware } from './middleware/tenant';
   app.use(tenantMiddleware);
   ```
4. –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã Express –¥–ª—è `req.tenant` –∏ `req.db`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ middleware –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç tenant
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π subdomain –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404

### –≠—Ç–∞–ø 3: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è Storage layer

**–¶–µ–ª—å:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –≤ tenant-specific –ë–î

**–ó–∞–¥–∞—á–∏:**
1. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `server/storage.ts`:
   - –£–±—Ä–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π DB connection
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `req.db` –≤–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ pool
   - –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å db connection –≤ –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ storage
   
2. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ä–æ—É—Ç—ã –≤ `server/routes.ts`:
   ```typescript
   // –ë—ã–ª–æ:
   const products = await storage.getProducts();
   
   // –°—Ç–∞–ª–æ:
   const products = await storage.getProducts(req.db);
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å 2 —Ç–µ—Å—Ç–æ–≤—ã—Ö tenant —Å —Ä–∞–∑–Ω—ã–º–∏ –ë–î
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –∫–∞–∂–¥—ã–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è

### –≠—Ç–∞–ø 4: File Storage Isolation

**–¶–µ–ª—å:** –ö–∞–∂–¥—ã–π tenant —Ö—Ä–∞–Ω–∏—Ç —Ñ–∞–π–ª—ã –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å `server/upload-manager.ts` (—Å–º. –∫–æ–¥ –≤—ã—à–µ)
2. –û–±–Ω–æ–≤–∏—Ç—å Multer –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```typescript
   const upload = multer({ 
     storage: createTenantStorage('products') 
   });
   ```
3. –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è static —Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π tenant:
   ```typescript
   app.get('/uploads/*', (req, res) => {
     if (!req.tenant) return res.status(403).send('Forbidden');
     const filePath = req.path;
     if (!checkFileAccess(req.tenant.id, filePath)) {
       return res.status(403).send('Forbidden');
     }
     res.sendFile(filePath);
   });
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ tenant_1
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª —á–µ—Ä–µ–∑ tenant_2 (–¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 403)

### –≠—Ç–∞–ø 5: Session Management

**–¶–µ–ª—å:** –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Å—Å–∏–π –º–µ–∂–¥—É tenants

**–ó–∞–¥–∞—á–∏:**
1. –û–±–Ω–æ–≤–∏—Ç—å session store:
   ```typescript
   app.use(session({
     store: new PgStore({
       pool: masterDb, // –°–µ—Å—Å–∏–∏ –≤ master DB
       tableName: 'sessions'
     }),
     genid: (req) => {
       // –í–∫–ª—é—á–∞–µ–º tenant_id –≤ session key
       return `${req.tenant?.id}_${uuid()}`;
     },
     // ...
   }));
   ```

2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cookie domain:
   ```typescript
   cookie: {
     domain: req.hostname.endsWith('.ordis.co.il') 
       ? '.ordis.co.il'  // wildcard –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
       : req.hostname     // –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º–µ–Ω
   }
   ```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ó–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –≤ tenant_1
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Å—Å–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ tenant_2

### –≠—Ç–∞–ø 6: Admin Panel –¥–ª—è Tenant Management

**–¶–µ–ª—å:** UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞–º–∏

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/tenants` (—Ç–æ–ª—å–∫–æ –¥–ª—è super admin):
   - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤
   - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ subdomain/custom_domain
   - –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è

2. API endpoints –≤ `server/routes.ts`:
   ```typescript
   // GET /api/admin/tenants - —Å–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤
   // POST /api/admin/tenants - —Å–æ–∑–¥–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω
   // PUT /api/admin/tenants/:id - –æ–±–Ω–æ–≤–∏—Ç—å
   // DELETE /api/admin/tenants/:id - –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
   ```

3. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ tenant:
   - –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `tenants` —Ç–∞–±–ª–∏—Ü–µ
   - –°–æ–∑–¥–∞—Ç—å –ë–î –¥–ª—è tenant (–∏–ª–∏ –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Ç–µ—Ä)
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–π –ë–î
   - –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É uploads/tenant_X/

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω —á–µ—Ä–µ–∑ admin panel
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∞–≥–∞–∑–∏–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–æ–¥–¥–æ–º–µ–Ω—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–æ–∑–¥–∞–ª–∞—Å—å –ø–∞–ø–∫–∞ –¥–ª—è uploads

### –≠—Ç–∞–ø 7: Custom Domain Support

**–¶–µ–ª—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–æ–≤

**Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```nginx
server {
  # –°–ª—É—à–∞—Ç—å –≤—Å–µ –¥–æ–º–µ–Ω—ã
  server_name *.ordis.co.il ~^(.+)$;
  
  location / {
    proxy_pass http://localhost:5000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
  }
}
```

**SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:**
1. Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è `*.ordis.co.il`:
   ```bash
   certbot certonly --dns-cloudflare \
     -d '*.ordis.co.il' \
     -d 'ordis.co.il'
   ```

2. Auto-provision –¥–ª—è custom domains (Let's Encrypt):
   ```bash
   certbot --nginx -d edahouse.com
   ```

**–ó–∞–¥–∞—á–∏:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –¥–ª—è wildcard –¥–æ–º–µ–Ω–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ admin panel –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è custom domain
3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤: "–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å –Ω–∞ IP X.X.X.X"

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å custom domain –¥–ª—è tenant
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∞–≥–∞–∑–∏–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —ç—Ç–æ–º—É –¥–æ–º–µ–Ω—É

### –≠—Ç–∞–ø 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**Security checklist:**
- ‚úÖ Tenant –Ω–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–æ–≥–æ tenant
- ‚úÖ Tenant –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª—ã –¥—Ä—É–≥–æ–≥–æ tenant  
- ‚úÖ –°–µ—Å—Å–∏–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É tenants
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ (prepared statements)
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ error messages

**Load testing:**
```bash
# –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –æ—Ç 100 –º–∞–≥–∞–∑–∏–Ω–æ–≤
ab -n 10000 -c 100 https://shop1.ordis.co.il/
ab -n 10000 -c 100 https://shop2.ordis.co.il/
```

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. Response time < 200ms –ø—Ä–∏ 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö tenants
2. Memory usage —Å—Ç–∞–±–∏–ª—å–Ω–∞
3. Connection pooling —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

### –≠—Ç–∞–ø 9: Deployment Strategy

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ VPS:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ PostgreSQL –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ (–∫–ª–∞—Å—Ç–µ—Ä—ã)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx —Å wildcard –¥–æ–º–µ–Ω–∞–º–∏
3. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è *.ordis.co.il

**–ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ edahouse:**
1. –°–æ–∑–¥–∞—Ç—å tenant –∑–∞–ø–∏—Å—å –¥–ª—è edahouse –≤ master_db
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–æ–¥ –Ω–∞ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ edahouse.ordis.co.il —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

**Rollout –ø–ª–∞–Ω:**
1. Blue-green deployment –¥–ª—è zero downtime
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)
3. Alerts –Ω–∞ Telegram/Email –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

```
server/
  ‚îú‚îÄ‚îÄ middleware/
  ‚îÇ   ‚îú‚îÄ‚îÄ tenant.ts          (NEW) - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ tenant –ø–æ –¥–æ–º–µ–Ω—É
  ‚îÇ   ‚îî‚îÄ‚îÄ auth.ts            (MODIFIED) - —É—á–∏—Ç—ã–≤–∞—Ç—å tenant –≤ auth
  ‚îú‚îÄ‚îÄ db-manager.ts          (NEW) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DB –ø—É–ª–∞–º–∏
  ‚îú‚îÄ‚îÄ upload-manager.ts      (NEW) - tenant-–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ uploads
  ‚îú‚îÄ‚îÄ tenant-service.ts      (NEW) - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –¥–ª—è tenants
  ‚îú‚îÄ‚îÄ storage.ts             (MODIFIED) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å req.db
  ‚îú‚îÄ‚îÄ routes.ts              (MODIFIED) - –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å req.db –≤ storage
  ‚îî‚îÄ‚îÄ index.ts               (MODIFIED) - –ø–æ–¥–∫–ª—é—á–∏—Ç—å tenant middleware

client/src/
  ‚îî‚îÄ‚îÄ pages/
      ‚îî‚îÄ‚îÄ admin-tenants.tsx  (NEW) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞–º–∏

shared/
  ‚îî‚îÄ‚îÄ schema.ts              (MODIFIED) - –¥–æ–±–∞–≤–∏—Ç—å tenants —Ç–∞–±–ª–∏—Ü—ã

uploads/                     (MODIFIED)
  ‚îú‚îÄ‚îÄ tenant_1/
  ‚îú‚îÄ‚îÄ tenant_2/
  ‚îî‚îÄ‚îÄ tenant_N/
```

## Environment Variables

```env
# Master DB (–¥–ª—è tenant management)
MASTER_DB_URL=postgresql://user:pass@host:5432/master_db

# DB Clusters
DB_CLUSTER_1_URL=postgresql://user:pass@host:5432/cluster_1
DB_CLUSTER_2_URL=postgresql://user:pass@host:5432/cluster_2

# Session
SESSION_SECRET=your-secret-key

# Security
ALLOWED_ORIGINS=*.ordis.co.il

# Super Admin (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ tenant management)
SUPER_ADMIN_EMAIL=admin@ordis.co.il
```

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- ‚úÖ –û–¥–∏–Ω –∫–æ–¥ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç N –º–∞–≥–∞–∑–∏–Ω–æ–≤
- ‚úÖ –ö–∞–∂–¥—ã–π –º–∞–≥–∞–∑–∏–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω (–¥–∞–Ω–Ω—ã–µ + —Ñ–∞–π–ª—ã + —Å–µ—Å—Å–∏–∏)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ = –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤: shop1.ordis.co.il, shop2.ordis.co.il
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ custom domains: edahouse.com, myshop.com
- ‚úÖ Response time < 200ms –ø—Ä–∏ 100 tenants
- ‚úÖ Zero data leakage –º–µ–∂–¥—É tenants
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞–º–∏

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ (–ø–æ—Å–ª–µ MVP)

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–π multi-tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. **Tenant Analytics Dashboard** - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –º–∞–≥–∞–∑–∏–Ω–∞–º
2. **Auto-scaling DB clusters** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ
3. **Backup & Restore** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ tenant –æ—Ç–¥–µ–ª—å–Ω–æ
4. **Tenant-specific features** - –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
5. **Billing System** - –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Ç–∞—Ä–∏—Ñ—ã –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –º–∞–≥–∞–∑–∏–Ω–æ–≤
6. **White-label** - –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –±—Ä–µ–Ω–¥–∏–Ω–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞
7. **Multi-region support** - –∫–ª–∞—Å—Ç–µ—Ä—ã –≤ —Ä–∞–∑–Ω—ã—Ö –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω–∞—Ö

## –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

**–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ –≤ –Ω–æ–≤–æ–º Replit –ø—Ä–æ–µ–∫—Ç–µ:**

1. –ü—Ä–æ—á–∏—Ç–∞–π –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç —Ü–µ–ª–∏–∫–æ–º
2. –°–æ–∑–¥–∞–π task list –∏–∑ –≠—Ç–∞–ø–æ–≤ 1-9
3. –ù–∞—á–Ω–∏ —Å –≠—Ç–∞–ø–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ö–µ–º—ã –ë–î
4. –¢–µ—Å—Ç–∏—Ä—É–π –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
5. –ò—Å–ø–æ–ª—å–∑—É–π architect tool –¥–ª—è —Ä–µ–≤—å—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –∞–≥–µ–Ω—Ç—É –≤ –Ω–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ:**

```
–†–µ–∞–ª–∏–∑—É–π multi-tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É –∏–∑ —Ñ–∞–π–ª–∞ MULTI_TENANT_MIGRATION_PLAN.md

–ù–∞—á–Ω–∏ —Å –≠—Ç–∞–ø–∞ 1: —Å–æ–∑–¥–∞–Ω–∏–µ master –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è tenants.

–ò—Å–ø–æ–ª—å–∑—É–π PostgreSQL, TypeScript, Express.js –∏ Drizzle ORM.
```

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 27 –æ–∫—Ç—è–±—Ä—è 2025
**–ü—Ä–æ–µ–∫—Ç:** eDAHouse Multi-Tenant Migration
**–¶–µ–ª—å:** –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è 1000+ –º–∞–≥–∞–∑–∏–Ω–æ–≤

–£–¥–∞—á–∏! üöÄ
