# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú –ü–û–°–õ–ï –ú–ò–ì–†–ê–¶–ò–ò –®–¢–†–ò–•-–ö–û–î–û–í –ù–ê –°–ï–†–í–ï–†–ï

## üö® –ü–†–û–ë–õ–ï–ú–ê
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ `add-barcode-system.sql` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- –ü—Ä–æ–ø–∞–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü–æ—è–≤–∏–ª–∏—Å—å —Å–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–º
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ

## üîç –ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´
–ú–∏–≥—Ä–∞—Ü–∏—è `add-barcode-system.sql` –¥–æ–±–∞–≤–∏–ª–∞ –ò–ó–ë–´–¢–û–ß–ù–´–ï –∫–æ–ª–æ–Ω–∫–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï–¢ –≤ —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º–µ Drizzle:

**–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
- `barcode_en`, `barcode_he`, `barcode_ar` –≤ —Ç–∞–±–ª–∏—Ü–µ `products` (–≤ —Å—Ö–µ–º–µ —Ç–æ–ª—å–∫–æ `barcode`)
- `scanned_weight`, `is_weight_scanned`, `barcode_used` –≤ —Ç–∞–±–ª–∏—Ü–µ `order_items` (–∏—Ö –Ω–µ—Ç –≤ —Å—Ö–µ–º–µ)
- –¢–∞–±–ª–∏—Ü—ã `barcode_config` –∏ `barcode_scan_log` (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö

## üõ†Ô∏è –†–ï–®–ï–ù–ò–ï

### –í–ê–†–ò–ê–ù–¢ 1: –ü–û–õ–ù–´–ô –û–¢–ö–ê–¢ –ú–ò–ì–†–ê–¶–ò–ò (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
psql -U demo_ordis_usr -h localhost -d demo_ordis -f migrations/rollback-barcode-system.sql
```

–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç:
- ‚úÖ –õ–∏—à–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ (`barcode_en`, `barcode_he`, `barcode_ar`)
- ‚úÖ –õ–∏—à–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ `order_items` 
- ‚úÖ –ù–µ–Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (`barcode_config`, `barcode_scan_log`)
- ‚úÖ –°–±—Ä–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

### –í–ê–†–ò–ê–ù–¢ 2: –†–£–ß–ù–ê–Ø –û–ß–ò–°–¢–ö–ê
–ï—Å–ª–∏ `rollback-barcode-system.sql` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

```sql
BEGIN;

-- –£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤
ALTER TABLE products 
DROP COLUMN IF EXISTS barcode_en,
DROP COLUMN IF EXISTS barcode_he,
DROP COLUMN IF EXISTS barcode_ar;

-- –£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ order_items
ALTER TABLE order_items
DROP COLUMN IF EXISTS scanned_weight,
DROP COLUMN IF EXISTS is_weight_scanned,
DROP COLUMN IF EXISTS barcode_used;

-- –£–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
DROP TABLE IF EXISTS barcode_scan_log;
DROP TABLE IF EXISTS barcode_config;

-- –°–±—Ä–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
UPDATE products 
SET barcode = NULL
WHERE barcode IN ('025874', '025875');

COMMIT;
```

## üîß –ß–¢–û –û–°–¢–ê–ù–ï–¢–°–Ø –†–ê–ë–û–¢–ê–¢–¨

–ü–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è **–¢–û–õ–¨–ö–û –ö–û–†–†–ï–ö–¢–ù–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨**:
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ –ø–æ–ª–µ `barcode` –≤ —Ç–∞–±–ª–∏—Ü–µ `products` (–∫–∞–∫ –≤ —Å—Ö–µ–º–µ)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è
- ‚úÖ –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–º —Å–Ω–æ–≤–∞ —Å–∫—Ä–æ—é—Ç—Å—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –∫–∞–∫ –Ω–∞ Replit
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è (–Ω–æ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–ª–µ–π)

## üìã –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–∏—à–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ —É–¥–∞–ª–µ–Ω—ã
\d products;
\d order_items;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–∏—à–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —É–¥–∞–ª–µ–Ω—ã
\dt barcode*;
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å **–¢–û–õ–¨–ö–û** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –∏–∑ —Å—Ö–µ–º—ã Drizzle.