# Ð‘Ð«Ð¡Ð¢Ð ÐžÐ• Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• ÐŸÐ ÐžÐ‘Ð›Ð•Ðœ VPS Ð¡Ð•Ð Ð’Ð•Ð Ð

## ðŸš¨ ÐŸÐ ÐžÐ‘Ð›Ð•ÐœÐ: "DATABASE_URL Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½!"

### âš¡ Ð‘Ð«Ð¡Ð¢Ð ÐžÐ• Ð Ð•Ð¨Ð•ÐÐ˜Ð• (5 Ð¼Ð¸Ð½ÑƒÑ‚):

1. **Ð—Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð½Ð° VPS ÑÐµÑ€Ð²ÐµÑ€** Ð¸ Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¿Ð°Ð¿ÐºÑƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:
```bash
cd /Ð¿ÑƒÑ‚ÑŒ/Ðº/Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ
```

2. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÑƒ**:
```bash
git pull origin main
chmod +x scripts/setup-server-env.sh
./scripts/setup-server-env.sh
```

3. **ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ DATABASE_URL**:
```bash
nano .env
```

ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÑƒ:
```
DATABASE_URL=postgresql://username:password@localhost:5432/edahouse_ord
```

Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°ÑˆÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð‘Ð”:
```
DATABASE_URL=postgresql://Ð’ÐÐ¨Ð•_Ð˜ÐœÐ¯_ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¯:Ð’ÐÐ¨_ÐŸÐÐ ÐžÐ›Ð¬@localhost:5432/Ð’ÐÐ¨Ð_Ð‘Ð”
```

4. **Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»** (Ctrl+X, Y, Enter)

5. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…**:
```bash
./scripts/fix-server-database.sh
```

6. **ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ**:
```bash
pm2 restart edahouse
```

## ðŸ“‹ ÐŸÐžÐ›Ð£Ð§Ð•ÐÐ˜Ð• Ð”ÐÐÐÐ«Ð¥ Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥

### Ð•ÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ FastPanel/cPanel:
1. Ð—Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ð¾Ð¼
2. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ» "Ð‘Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…" Ð¸Ð»Ð¸ "PostgreSQL"
3. ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ:
   - Ð¥Ð¾ÑÑ‚: Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ `localhost` Ð¸Ð»Ð¸ IP ÑÐµÑ€Ð²ÐµÑ€Ð°
   - ÐŸÐ¾Ñ€Ñ‚: Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ `5432`
   - Ð˜Ð¼Ñ Ð‘Ð”: `edahouse_ord` Ð¸Ð»Ð¸ Ð¿Ð¾Ñ…Ð¾Ð¶ÐµÐµ
   - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ: ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ€Ð°Ð½ÐµÐµ

### Ð•ÑÐ»Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð‘Ð” Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹:
```bash
# ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð½Ð°Ð¹Ñ‚Ð¸ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
grep -r "DATABASE" . --include="*.env*"
grep -r "postgresql" . --include="*.js" --include="*.ts"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹ PM2
pm2 show edahouse
```

## ðŸ†˜ ÐÐ›Ð¬Ð¢Ð•Ð ÐÐÐ¢Ð˜Ð’ÐÐžÐ• Ð Ð•Ð¨Ð•ÐÐ˜Ð•

Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ PostgreSQL, Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ SQLite:

1. **Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env.sqlite**:
```bash
cat > .env << EOF
NODE_ENV=production
PORT=3000
USE_NEON=false
DATABASE_URL=file:./database.sqlite
SESSION_SECRET=$(openssl rand -base64 32)
EOF
```

2. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ SQLite Ð´Ñ€Ð°Ð¹Ð²ÐµÑ€**:
```bash
npm install better-sqlite3
```

3. **ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ**:
```bash
pm2 restart edahouse
```

## âœ… ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð£Ð¡ÐŸÐ•Ð¨ÐÐžÐ“Ðž Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð¯

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:

1. **Ð›Ð¾Ð³Ð¸ PM2**:
```bash
pm2 logs edahouse --lines 20
```

2. **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ**:
```bash
pm2 status
```

3. **Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ ÑÐ°Ð¹Ñ‚Ð°**:
```bash
curl http://localhost:3000/api/health
```

Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ: `{"status":"ok"}`

## ðŸ“ž ÐŸÐžÐ›Ð£Ð§Ð•ÐÐ˜Ð• ÐŸÐžÐœÐžÐ©Ð˜

Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÑŽÑ‚ÑÑ, Ð¿Ñ€Ð¸ÑˆÐ»Ð¸Ñ‚Ðµ:
1. Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ `pm2 logs edahouse --lines 50`
2. Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ `.env` Ñ„Ð°Ð¹Ð»Ð° (Ð‘Ð•Ð— Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¹!)
3. Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ `pm2 status`

---
**Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ**: 5-10 Ð¼Ð¸Ð½ÑƒÑ‚  
**Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ**: ÐÐ°Ñ‡Ð¸Ð½Ð°ÑŽÑ‰Ð¸Ð¹  
**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚**: ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ñ€Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ñ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð¹ Ð‘Ð”