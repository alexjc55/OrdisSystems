ОБНОВЛЕННЫЕ КОМАНДЫ ДЛЯ VPS
============================

ИСПРАВЛЕНИЯ В КОНФИГУРАЦИИ PM2:
1. Имя процесса: 'edahouse' (вместо 'edahouse-production')
2. Скрипт: 'server/index.js' (вместо 'dist/index.js')
3. База данных: правильные данные для edahouse_usr/edahouse

КОМАНДЫ ДЛЯ ВЫПОЛНЕНИЯ:

1. Остановить любые запущенные процессы:
pm2 delete all

2. Применить миграцию базы данных:
psql -h localhost -U edahouse_usr -d edahouse << 'EOF'
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slider_speed INTEGER DEFAULT 5000;
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slider_effect VARCHAR(10) DEFAULT 'fade';
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide1_image VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide1_title VARCHAR(255);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide1_subtitle TEXT;
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide1_button_text VARCHAR(100);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide1_button_link VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide1_text_position VARCHAR(20) DEFAULT 'left';
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide2_image VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide2_title VARCHAR(255);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide2_subtitle TEXT;
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide2_button_text VARCHAR(100);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide2_button_link VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide2_text_position VARCHAR(20) DEFAULT 'left';
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide3_image VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide3_title VARCHAR(255);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide3_subtitle TEXT;
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide3_button_text VARCHAR(100);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide3_button_link VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide3_text_position VARCHAR(20) DEFAULT 'left';
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide4_image VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide4_title VARCHAR(255);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide4_subtitle TEXT;
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide4_button_text VARCHAR(100);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide4_button_link VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide4_text_position VARCHAR(20) DEFAULT 'left';
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide5_image VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide5_title VARCHAR(255);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide5_subtitle TEXT;
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide5_button_text VARCHAR(100);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide5_button_link VARCHAR(500);
ALTER TABLE store_settings ADD COLUMN IF NOT EXISTS slide5_text_position VARCHAR(20) DEFAULT 'left';
UPDATE store_settings SET slider_autoplay = true, slider_speed = 5000, slider_effect = 'fade' WHERE id = 1;
EOF

3. Проверить миграцию (должно показать 33):
psql -h localhost -U edahouse_usr -d edahouse -c "SELECT COUNT(*) FROM information_schema.columns WHERE table_name = 'store_settings' AND (column_name LIKE '%slider%' OR column_name LIKE '%slide%');"

4. Запустить правильный процесс:
pm2 start ecosystem.production.config.cjs

5. Проверить что работает:
pm2 status
pm2 logs edahouse --lines 10

Теперь процесс будет называться 'edahouse' и использовать правильные пути и базу данных.