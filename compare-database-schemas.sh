#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ VPS

echo "üîç –°–†–ê–í–ù–ï–ù–ò–ï –°–¢–†–£–ö–¢–£–†–´ –ë–ê–ó –î–ê–ù–ù–´–•"
echo "================================="

VPS_HOST="ordis.co.il"
VPS_USER="ordis_co_il_usr@vxaorzmkzo"
VPS_DB_USER="edahouse_usr"
VPS_DB_NAME="edahouse"

echo "üìä –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "–õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Replit):" > local_schema.txt
echo "–ö–æ–ª–æ–Ω–∫–∏ —Å–ª–∞–π–¥–µ—Ä–∞:" >> local_schema.txt

# –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
# (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)

echo "üìä –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã VPS –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É VPS –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
ssh $VPS_USER@$VPS_HOST "psql -h localhost -U $VPS_DB_USER -d $VPS_DB_NAME -c \"SELECT column_name, data_type, column_default FROM information_schema.columns WHERE table_name = 'store_settings' AND (column_name LIKE '%slider%' OR column_name LIKE '%slide%') ORDER BY column_name;\"" > vps_schema.txt

echo "üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤..."
echo "VPS –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ —Å–ª–∞–π–¥–µ—Ä–∞:"
cat vps_schema.txt

echo ""
echo "üìù –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo "1. –°—Ä–∞–≤–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã local_schema.txt –∏ vps_schema.txt"
echo "2. –°–æ–∑–¥–∞–π—Ç–µ SQL –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫"
echo "3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ"

echo "‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã local_schema.txt –∏ vps_schema.txt"